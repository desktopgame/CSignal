// BEGIN-AUTOGENERATED-BLOCK
/**
 * @file opcode_buf.h
 * @brief オペコードの一覧をまとめた構造体を定義します。
 * @author koya
 * @date 2018/10/31
 */
// END-AUTOGENERATED-BLOCK

#pragma once
#ifndef BEACON_VM_OPCODE_BUF_H
#define BEACON_VM_OPCODE_BUF_H
#include "../util/vector.h"
#include "label.h"
#include "opcode.h"
/**
 * オペコードの一覧を表す構造体.
 */
typedef struct bc_OpcodeBuf {
        bc_Vector* Instructions;
        bc_Vector* LabelTable;
} bc_OpcodeBuf;

/**
 * オペコードの一覧を作成します.
 * @return
 */
bc_OpcodeBuf* bc_NewOpcodeBuf();

/**
 * self->source に item を追加します.
 * @param self
 * @param item
 * @return
 */
int bc_AddOpcodeBuf(bc_OpcodeBuf* self, bc_VectorItem item);

/**
 * このバッファーの開放時に開放されるラベルを作成します.
 * @param index
 * @return
 */
bc_Label* bc_AddLabelOpcodeBuf(bc_OpcodeBuf* self, int index);

/**
 * nop を追加してその位置を返します.
 * @param self
 * @return
 */
int bc_AddNOPOpcodeBuf(bc_OpcodeBuf* self);

/**
 * オペコードの一覧を開放します.
 * @param self
 */
void bc_DeleteOpcodeBuf(bc_OpcodeBuf* self);
#endif  // !SIGNAL_VM_OPCODE_BUF_H
