# instruction
仮想マシンで使用されるオペコードの詳細仕様まとめ。  
更新が追いついてないこととかあるかもしれません。

## 用語
|名前|意味|
|:---|:---|
|i|Integer|
|d|Double|
|b|Bool|
|c|Char|
|s|String|
|label|ジャンプ命令において、ジャンプ命令よりも後方にジャンプするために使う|
|pc|ProgramCounter。実行中の位置。|
|スタック|演算中の引数をおいておく場所|
|プッシュ|スタックの末尾に要素を追加すること|
|ポップ|スタックの末尾を取得して捨てること|
|テーブル|変数名と型を紐づける名前表|

## 算術演算
Xには i か d が入ります。

|名前|オペランド|意味|
|:---|:---|:---|
|op_Xadd||二つ取り出して加算した結果をプッシュする|
|op_Xsub||二つ取り出して減算した結果をプッシュする|
|op_Xmul||二つ取り出して乗算した結果をプッシュする|
|op_Xdiv||二つ取り出して除算した結果をプッシュする|
|op_Xmod||二つ取り出して剰余した結果をプッシュする|

## 比較演算
Xには i か d が入ります。

|名前|オペランド|意味|
|:---|:---|:---|
|op_Xeq||二つ取り出して==によって比較した結果をプッシュする|
|op_Xnoeq||二つ取り出して!=によって比較した結果をプッシュする|
|op_Xgt||二つ取り出して>によって比較した結果をプッシュする|
|op_Xge||二つ取り出して>=によって比較した結果をプッシュする|
|op_Xlt||二つ取り出して<によって比較した結果をプッシュする|
|op_Xle||二つ取り出して<=によって比較した結果をプッシュする|

## 論理演算
Xには i か b が入ります。

|名前|オペランド|意味|
|:---|:---|:---|
|op_Xbit_or||二つ取り出してORで演算した結果をプッシュする|
|op_Xbit_and||二つ取り出してANDで演算した結果をプッシュする|

## 定数
Xには i b c d s が入ります。

|名前|オペランド|意味|
|:---|:---|:---|
|op_Xconst|定数プール中の位置(int)|定数プールから値を取得してプッシュする
|op_true||定数trueをプッシュする|
|op_false||定数falseをプッシュする|
|op_null||定数nullをプッシュする|

## ジャンプ
ジャンプ命令にはオペランドとしてジャンプ先が必要です。  
これは整数ではなく label で統一されます。

|名前|オペランド|意味|
|:---|:---|:---|
|op_goto|label|pcをlabelで上書きする|
|op_goto_if_true|label|ポップがtrueならpcをlabelで上書きする|
|op_goto_if_false|label|ポップがfalseならpcをlabelで上書きする|

## シンボルテーブル
全ての名前はインデックスへ変換されます。

|名前|オペランド|意味|
|:---|:---|:---|
|op_store|int|テーブルの指定位置をポップで上書きする|
|op_load|int|テーブルの指定位置を取得してプッシュする|

## フィールド
あとで

## メソッド
あとで